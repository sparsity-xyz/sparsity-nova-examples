(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6710:function(e,t,a){Promise.resolve().then(a.bind(a,438))},438:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(7437),s=a(2265);function n(e){return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")}function i(e){let t=new Uint8Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=parseInt(e.substr(a,2),16);return t.buffer}function l(e){let t=new Uint8Array(e);return 120===t.length?t.slice(23).buffer:e}class o{async connect(e){this.enclaveBaseUrl=e.replace(/\/$/,""),this.keyPair=await crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-384"},!0,["deriveBits"]);let t=await this.fetchAttestation(),a=l(i(t.public_key));return this.serverPublicKey=await crypto.subtle.importKey("raw",a,{name:"ECDH",namedCurve:"P-384"},!0,[]),this.isConnected=!0,t}async fetchAttestation(){let e=await fetch("".concat(this.enclaveBaseUrl,"/.well-known/attestation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!e.ok)throw Error("Failed to fetch attestation: ".concat(e.status));let t=e.headers.get("content-type")||"";if(t.includes("application/cbor")||t.includes("application/octet-stream")){let t=await a.e(693).then(a.t.bind(a,4693,23)),r=await e.arrayBuffer(),s=t.decode(new Uint8Array(r));return this.parseCborAttestation(s)}{let t=await e.json();if(t.attestation_document&&"object"==typeof t.attestation_document)return{attestation_doc:JSON.stringify(t),public_key:t.attestation_document.public_key||"",parsedAttestation:JSON.stringify(t)};if(t.attestation_doc&&"string"==typeof t.attestation_doc)try{let e=await a.e(693).then(a.t.bind(a,4693,23)),r=atob(t.attestation_doc),s=new Uint8Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);let n=e.decode(s);return{...await this.parseCborAttestation(n),attestation_doc:t.attestation_doc}}catch(e){console.warn("Failed to decode base64 CBOR attestation:",e)}return t}}async parseCborAttestation(e){let t;let r=await a.e(693).then(a.t.bind(a,4693,23)),s=e=>Array.from(e instanceof Uint8Array?e:new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join(""),n=null;if(Array.isArray(e)&&e.length>=3){let a=e[2];n=e.length>3?e[3]:null,t=r.decode(a)}else t=e;let i=(e,t,a)=>{var r,s;return e instanceof Map?null!==(r=e.get(t))&&void 0!==r?r:e.get(a):null!==(s=e[t])&&void 0!==s?s:e[a]},l=i(t,"module_id",1),o=i(t,"timestamp",2),c=i(t,"digest",3),d=i(t,"pcrs",4),m=i(t,"certificate",5),x=i(t,"cabundle",6),u=i(t,"public_key",7),h=i(t,"user_data",8),p=i(t,"nonce",9),y={};if(d){if(d instanceof Map)for(let[e,t]of Array.from(d.entries()))t instanceof Uint8Array||t instanceof ArrayBuffer?y[String(e)]=s(t):y[String(e)]=String(t);else if("object"==typeof d)for(let[e,t]of Object.entries(d))t instanceof Uint8Array||t instanceof ArrayBuffer?y[String(e)]=s(t):y[String(e)]=String(t)}let f=null;if(h)try{if(h instanceof Uint8Array||h instanceof ArrayBuffer){let e=new TextDecoder().decode(new Uint8Array(h));f=JSON.parse(e)}else f="string"==typeof h?JSON.parse(h):h}catch(e){console.warn("Failed to parse user_data as JSON:",e)}let g="";u instanceof Uint8Array||u instanceof ArrayBuffer?g=s(u):"string"==typeof u&&(g=u);let b=e=>{let t=e instanceof Uint8Array?e:new Uint8Array(e);return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(t))))},j={attestation_document:{module_id:l?String(l):"",timestamp:"number"==typeof o?o:0,digest:c instanceof Uint8Array||c instanceof ArrayBuffer?s(c):String(c||""),pcrs:y,public_key:g,user_data:f,certificate:m?b(m):"",cabundle:Array.isArray(x)?x.map(e=>b(e)):[],nonce:p?p instanceof Uint8Array||p instanceof ArrayBuffer?s(p):String(p):""},signature:n?s(n):null};return{attestation_doc:JSON.stringify(j),public_key:g,parsedAttestation:JSON.stringify(j)}}async getPublicKeyHex(){if(!this.keyPair)throw Error("Client not initialized. Call connect() first.");return n(function(e){let t=new Uint8Array(e);if(97!==t.length)throw Error("Invalid raw P-384 public key length: ".concat(t.length));let a=new Uint8Array([48,118,48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,34,3,98,0]),r=new Uint8Array(120);return r.set(a,0),r.set(t,23),r.buffer}(await crypto.subtle.exportKey("raw",this.keyPair.publicKey)))}async deriveSharedKey(e){if(!this.keyPair)throw Error("Client not initialized. Call connect() first.");let t=await crypto.subtle.deriveBits({name:"ECDH",public:e},this.keyPair.privateKey,384),a=await crypto.subtle.importKey("raw",t,{name:"HKDF"},!1,["deriveBits","deriveKey"]);return crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new ArrayBuffer(0),info:new TextEncoder().encode("encryption data")},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async encrypt(e){if(!this.serverPublicKey||!this.keyPair)throw Error("Client not initialized. Call connect() first.");let t=await this.deriveSharedKey(this.serverPublicKey),a=crypto.getRandomValues(new Uint8Array(32)),r=new TextEncoder().encode(e),s=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},t,r),i=await this.getPublicKeyHex();return{nonce:n(a.buffer),public_key:i,data:n(s)}}async decrypt(e){if(!this.keyPair)throw Error("Client not initialized. Call connect() first.");let t=l(i(e.public_key)),a=await crypto.subtle.importKey("raw",t,{name:"ECDH",namedCurve:"P-384"},!0,[]),r=await this.deriveSharedKey(a),s=i(e.nonce),n=i(e.encrypted_data),o=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(s)},r,n);return new TextDecoder().decode(o)}async setApiKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"openai";if(!this.isConnected)throw Error("Client not connected. Call connect() first.");let a=JSON.stringify({api_key:e,platform:t}),r=await this.encrypt(a),s=await fetch("".concat(this.enclaveBaseUrl,"/set-api-key"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error((await s.json()).error||"Request failed: ".concat(s.status));let n=await s.json();return JSON.parse(await this.decrypt(n.data))}async chat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gpt-4";if(!this.isConnected)throw Error("Client not connected. Call connect() first.");let a=JSON.stringify({message:e,ai_model:t}),r=await this.encrypt(a),s=await fetch("".concat(this.enclaveBaseUrl,"/talk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error((await s.json()).error||"Request failed: ".concat(s.status));let n=await s.json(),i=await this.decrypt(n.data),l=JSON.parse(i),o=await this.fetchAttestation(),c=await this.checkHealth();return{...l,signature:n.sig,verificationData:{attestation:o.attestation_doc,publicKey:o.public_key,ethAddr:c.enclave_address,encryptedRequest:JSON.stringify(r),decryptedRequest:a,rawResponse:JSON.stringify(n),encryptedResponse:JSON.stringify(n.data),decryptedResponse:i}}}async checkHealth(){let e=await fetch("".concat(this.enclaveBaseUrl,"/"));if(!e.ok)throw Error("Health check failed: ".concat(e.status));return e.json()}get connected(){return this.isConnected}get baseUrl(){return this.enclaveBaseUrl}constructor(){this.keyPair=null,this.serverPublicKey=null,this.enclaveBaseUrl="",this.isConnected=!1}}let c=new o;function d(e){let{onConnected:t}=e,[a,n]=(0,s.useState)("https://98.app.sparsity.cloud"),[i,l]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(null),u=async()=>{if(!a.trim()){d("Please enter the enclave base URL");return}l(!0),d(null);try{await c.connect(a.trim());let e=await c.checkHealth();x(e.enclave_address),t(e.enclave_address)}catch(e){console.error("Connection error:",e),d(e instanceof Error?e.message:"Failed to connect to enclave")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"bg-[#1a1a1a] rounded-lg border border-gray-800 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Connect to Enclave"}),m?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsx)("span",{className:"text-green-400 font-medium",children:"Connected"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Base URL:"}),(0,r.jsx)("p",{className:"text-white font-mono text-sm break-all",children:c.baseUrl})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Enclave Address:"}),(0,r.jsx)("p",{className:"text-primary font-mono text-sm break-all",children:m})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"baseUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"Enclave Base URL"}),(0,r.jsx)("input",{id:"baseUrl",type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"https://your-enclave.nova.sparsity.io",className:"w-full px-4 py-3 bg-[#0a0a0a] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",disabled:i}),(0,r.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"The enclave provides attestation at /.well-known/attestation"})]}),o&&(0,r.jsx)("div",{className:"p-3 bg-red-900/50 border border-red-800 rounded-lg text-red-400 text-sm",children:o}),(0,r.jsx)("button",{onClick:u,disabled:i,className:"w-full py-3 px-4 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 disabled:bg-primary/50 disabled:cursor-not-allowed transition-colors",children:i?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-black animate-bounce",style:{animationDelay:"0ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-black animate-bounce",style:{animationDelay:"150ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-black animate-bounce",style:{animationDelay:"300ms"}})]}):"Connect"})]})]})}let m=[{id:"openai",name:"OpenAI"},{id:"anthropic",name:"Anthropic"},{id:"gemini",name:"Google Gemini"}];function x(e){var t;let{isConnected:a,onApiKeySet:n}=e,[i,l]=(0,s.useState)(""),[o,d]=(0,s.useState)("openai"),[x,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),[g,b]=(0,s.useState)(!1),[j,v]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[k,A]=(0,s.useState)(null),S=(0,s.useCallback)(async()=>{if(a){v(!0),f(null);try{let e=await c.checkHealth();console.log("Health check result:",e),e.api_key_available&&(b(!0),A(e.cached_platform||"openai"),N(3))}catch(e){console.error("Error checking health:",e)}finally{v(!1)}}},[a]);(0,s.useEffect)(()=>{a&&S()},[a,S]),(0,s.useEffect)(()=>{if(null===w)return;if(w<=0){n();return}let e=setTimeout(()=>{N(w-1)},1e3);return()=>clearTimeout(e)},[w,n]);let C=async()=>{if(!i.trim()){f("Please enter an API key");return}if(!a){f("Please connect to enclave first");return}p(!0),f(null);try{let e=await c.setApiKey(i.trim(),o);console.log("API key set result:",e),b(!0),A(o),l(""),n()}catch(e){console.error("Error setting API key:",e),f(e instanceof Error?e.message:"Failed to set API key")}finally{p(!1)}};return(0,r.jsxs)("div",{className:"bg-[#1a1a1a] rounded-lg border border-gray-800 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Set API Key"}),a?j?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{className:"text-gray-400",children:"Checking API key status..."})]}):g?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsx)("span",{className:"text-green-400 font-medium",children:"API Key Already Configured"})]}),k&&(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["Platform: ",(0,r.jsx)("span",{className:"text-white",children:(null===(t=m.find(e=>e.id===k))||void 0===t?void 0:t.name)||k})]}),null!==w&&w>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["Proceeding to chat in ",(0,r.jsx)("span",{className:"text-primary font-medium",children:w})," seconds..."]}),(0,r.jsx)("button",{onClick:()=>{b(!1),N(null)},className:"text-sm text-primary hover:underline",children:"Update API Key"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform"}),(0,r.jsx)("select",{id:"platform",value:o,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 bg-[#0a0a0a] border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary",disabled:h,children:m.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-300 mb-2",children:"API Key"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"apiKey",type:x?"text":"password",value:i,onChange:e=>l(e.target.value),placeholder:"sk-...",className:"w-full px-4 py-3 pr-12 bg-[#0a0a0a] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",disabled:h}),(0,r.jsx)("button",{type:"button",onClick:()=>u(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:x?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Your API key is encrypted and sent securely to the enclave."})]}),y&&(0,r.jsx)("div",{className:"p-3 bg-red-900/50 border border-red-800 rounded-lg text-red-400 text-sm",children:y}),(0,r.jsx)("button",{onClick:C,disabled:h||!i.trim(),className:"w-full py-3 px-4 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 disabled:bg-primary/50 disabled:cursor-not-allowed transition-colors",children:h?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-black animate-bounce",style:{animationDelay:"0ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-black animate-bounce",style:{animationDelay:"150ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-black animate-bounce",style:{animationDelay:"300ms"}})]}):"Set API Key"})]}):(0,r.jsx)("p",{className:"text-gray-400",children:"Connect to enclave first to set API key."})]})}var u=a(6986);function h(e){var t;let{isOpen:a,onClose:n,data:i}=e,[l,o]=(0,s.useState)("attestation"),[c,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{a&&(null==i?void 0:i.attestation)&&!c&&y()},[a,null==i?void 0:i.attestation]);let y=async()=>{if(null==i?void 0:i.attestation){x(!0),p(null);try{try{let e=JSON.parse(i.attestation),t=e.attestation_document||e,a=null;if(t.user_data){if("string"==typeof t.user_data)try{a=JSON.parse(t.user_data)}catch(e){}else"object"==typeof t.user_data&&(a=t.user_data)}let r={module_id:t.module_id||"",digest:t.digest||"",timestamp:t.timestamp||0,pcrs:t.pcrs||{},certificate:t.has_certificate?"[present]":"",cabundle:t.has_cabundle?["[present]"]:[],public_key:t.public_key||"",user_data:a?JSON.stringify(a):"",nonce:t.nonce||""};d(r);return}catch(e){}let e=await (0,u.u4)(i.attestation);d(e)}catch(e){console.error("Failed to decode attestation:",e),p(e instanceof Error?e.message:"Failed to decode attestation")}finally{x(!1)}}};if(!a||!i)return null;let f=e=>{navigator.clipboard.writeText(e)},g=e=>{try{return JSON.stringify(JSON.parse(e),null,2)}catch(t){return e}},b=(null==c?void 0:c.user_data)?(0,u.tG)(c.user_data):null,j=i.ethAddr||(null==b?void 0:b.ethAddr)||"Unknown";return(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:n}),(0,r.jsxs)("div",{className:"relative bg-[#0a0a0a] border border-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-5 w-5 text-primary",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Full Chain Verification"})]}),(0,r.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-5 w-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"flex border-b border-gray-800",children:[{id:"attestation",label:"Attestation"},{id:"request",label:"Request"},{id:"response",label:"Response"}].map(e=>(0,r.jsx)("button",{onClick:()=>o(e.id),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat(l===e.id?"text-primary border-b-2 border-primary bg-primary/5":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,r.jsxs)("div",{className:"p-4 overflow-y-auto max-h-[calc(85vh-140px)]",children:["attestation"===l&&(0,r.jsx)("div",{className:"space-y-4",children:m?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{className:"ml-2 text-gray-400",children:"Decoding attestation..."})]}):h?(0,r.jsx)("div",{className:"p-4 bg-red-900/30 border border-red-800 rounded-lg text-red-400 text-sm",children:h}):c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-4 bg-primary/10 border border-primary/30 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"ETH Address"}),(0,r.jsx)("button",{onClick:()=>f(j),className:"text-xs text-gray-500 hover:text-white",children:"Copy"})]}),(0,r.jsx)("p",{className:"mt-1 font-mono text-primary text-sm break-all",children:j})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Public Key"}),(0,r.jsx)("button",{onClick:()=>f(i.publicKey),className:"text-xs text-gray-500 hover:text-white",children:"Copy"})]}),(0,r.jsx)("p",{className:"p-2 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-primary break-all max-h-20 overflow-y-auto",children:i.publicKey})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"PCR Values (Code Measurement)"})}),(0,r.jsx)("div",{className:"p-3 bg-[#1a1a1a] rounded border border-gray-800 space-y-1",children:Object.entries(c.pcrs).filter(e=>{let[t]=e;return["0","1","2","3"].includes(String(t))}).sort((e,t)=>{let[a]=e,[r]=t;return parseInt(a)-parseInt(r)}).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-500 w-12 flex-shrink-0",children:["PCR",t,":"]}),(0,r.jsx)("span",{className:"font-mono text-gray-300 break-all",children:a})]},t)})})]}),(0,r.jsx)("div",{className:"border border-gray-800 rounded-lg overflow-hidden",children:(0,r.jsxs)("details",{className:"group",open:!0,children:[(0,r.jsxs)("summary",{className:"px-4 py-3 bg-[#1a1a1a] cursor-pointer flex items-center justify-between hover:bg-[#252525] transition-colors",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Full Attestation"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-4 w-4 text-gray-500 group-open:rotate-180 transition-transform",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),(0,r.jsxs)("div",{className:"p-4 bg-[#0a0a0a] space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Module ID"}),(0,r.jsx)("p",{className:"mt-1 p-2 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-white",children:c.module_id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Timestamp"}),(0,r.jsx)("p",{className:"mt-1 p-2 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-white",children:new Date(c.timestamp).toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"All PCR Values"}),(0,r.jsx)("div",{className:"mt-1 p-2 bg-[#1a1a1a] rounded border border-gray-800 space-y-1 max-h-40 overflow-y-auto",children:Object.entries(c.pcrs).sort((e,t)=>{let[a]=e,[r]=t;return parseInt(a)-parseInt(r)}).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-500 w-12 flex-shrink-0",children:["PCR",t,":"]}),(0,r.jsx)("span",{className:"font-mono text-gray-300 break-all",children:a})]},t)})})]}),c.certificate&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Certificate"}),(0,r.jsx)("p",{className:"mt-1 p-2 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-gray-400 break-all max-h-24 overflow-y-auto",children:c.certificate})]}),c.cabundle&&c.cabundle.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"text-xs font-medium text-gray-400",children:["CA Bundle (",c.cabundle.length," certs)"]}),(0,r.jsx)("div",{className:"mt-1 p-2 bg-[#1a1a1a] rounded border border-gray-800 space-y-1 max-h-32 overflow-y-auto",children:c.cabundle.map((e,t)=>(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["Cert ",t+1,":"]}),(0,r.jsxs)("span",{className:"font-mono text-gray-400 break-all ml-2",children:[e.substring(0,60),"..."]})]},t))})]}),c.nonce&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Nonce"}),(0,r.jsx)("p",{className:"mt-1 p-2 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-gray-400 break-all",children:c.nonce})]}),c.user_data&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"User Data"}),(0,r.jsx)("pre",{className:"mt-1 p-2 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-gray-400 break-all whitespace-pre-wrap max-h-32 overflow-y-auto",children:(null==b?void 0:b.isJson)&&b.jsonData?JSON.stringify(b.jsonData,null,2):(null==b?void 0:b.ethAddr)||c.user_data})]})]})]})})]}):(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No attestation data available"})}),"request"===l&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Original Request (Plaintext)"})}),(0,r.jsx)("pre",{className:"p-3 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-white overflow-auto max-h-32",children:g(i.decryptedRequest)})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Encrypted Request (Sent to Enclave)"}),(0,r.jsx)("button",{onClick:()=>f(i.encryptedRequest),className:"text-xs text-gray-500 hover:text-white",children:"Copy"})]}),(0,r.jsx)("pre",{className:"p-3 bg-[#1a1a1a] rounded border border-gray-800 font-mono text-xs text-gray-400 overflow-auto max-h-40 break-all",children:g(i.encryptedRequest)})]})]}),"response"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border border-gray-800 rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-[#1a1a1a] px-4 py-2 border-b border-gray-800",children:(0,r.jsxs)("h3",{className:"text-sm font-medium text-white flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-5 h-5 rounded-full bg-primary/20 text-primary text-xs flex items-center justify-center",children:"1"}),"Signature Verification"]})}),(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Raw Response from Enclave"}),(0,r.jsx)("pre",{className:"mt-1 p-2 bg-[#0a0a0a] rounded font-mono text-xs text-gray-300 overflow-auto max-h-32",children:'{\n  "sig": "'.concat(null===(t=i.signature)||void 0===t?void 0:t.substring(0,32),'...",\n  "data": { ... encrypted_envelope }\n}')})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Signature (EIP-191)"}),(0,r.jsx)("div",{className:"mt-1 p-2 bg-[#0a0a0a] rounded font-mono text-xs text-primary break-all max-h-20 overflow-y-auto",children:i.signature})]}),(0,r.jsxs)("div",{className:"p-3 bg-primary/10 border border-primary/30 rounded-lg flex items-start gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-primary",children:"Signature Verified"}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:["This signature was created by TEE wallet: ",(0,r.jsxs)("span",{className:"text-primary font-mono",children:[null==j?void 0:j.substring(0,10),"...",null==j?void 0:j.substring(j.length-8)]})]})]})]})]})]}),(0,r.jsxs)("div",{className:"border border-gray-800 rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-[#1a1a1a] px-4 py-2 border-b border-gray-800",children:(0,r.jsxs)("h3",{className:"text-sm font-medium text-white flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-5 h-5 rounded-full bg-primary/20 text-primary text-xs flex items-center justify-center",children:"2"}),"Data Decryption"]})}),(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Encrypted Data (from enclave)"}),(0,r.jsx)("button",{onClick:()=>f(i.encryptedResponse),className:"text-xs text-gray-500 hover:text-white",children:"Copy"})]}),(0,r.jsx)("pre",{className:"mt-1 p-2 bg-[#0a0a0a] rounded font-mono text-xs text-gray-400 overflow-auto max-h-24 break-all",children:g(i.encryptedResponse)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center py-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-5 w-5 text-gray-600",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})}),(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-600",children:"AES-256-GCM Decryption"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400",children:"Decrypted Response"}),(0,r.jsx)("pre",{className:"mt-1 p-2 bg-[#0a0a0a] rounded font-mono text-xs text-white overflow-auto max-h-40",children:g(i.decryptedResponse)})]})]})]})]})]})]})]})}let p=[{id:"gpt-5.1",name:"GPT-5.1"},{id:"gpt-5",name:"GPT-5"},{id:"gpt-5-mini",name:"GPT-5 Mini"},{id:"gpt-4.1",name:"GPT-4.1"},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini"},{id:"gpt-4o",name:"GPT-4o"},{id:"gpt-4o-mini",name:"GPT-4o Mini"},{id:"gpt-4",name:"GPT-4"}];function y(e){let{isReady:t}=e,[a,n]=(0,s.useState)([]),[i,l]=(0,s.useState)(""),[o,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),[u,y]=(0,s.useState)("gpt-5.1"),[f,g]=(0,s.useState)(null),[b,j]=(0,s.useState)(!1),[v,w]=(0,s.useState)(null),N=(0,s.useRef)(null),k=()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{k()},[a]);let A=async e=>{if(e.preventDefault(),!i.trim()||!t||o)return;let a=i.trim();l(""),x(null),n(e=>[...e,{role:"user",content:a}]),d(!0);try{let e=await c.chat(a,u);n(t=>[...t,{role:"assistant",content:e.response,timestamp:e.timestamp,platform:e.platform,ai_model:e.ai_model,signature:e.signature,verificationData:{attestation:e.verificationData.attestation,publicKey:e.verificationData.publicKey,ethAddr:e.verificationData.ethAddr,encryptedRequest:e.verificationData.encryptedRequest,decryptedRequest:e.verificationData.decryptedRequest,rawResponse:e.verificationData.rawResponse,encryptedResponse:e.verificationData.encryptedResponse,decryptedResponse:e.verificationData.decryptedResponse,signature:e.signature}}])}catch(e){console.error("Chat error:",e),x(e instanceof Error?e.message:"Failed to send message")}finally{d(!1)}},S=e=>e?new Date(1e3*e).toLocaleString():"Unknown",C=e=>{w(e),j(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-gray-800",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Model:"}),(0,r.jsx)("select",{value:u,onChange:e=>y(e.target.value),className:"px-3 py-2 bg-[#0a0a0a] border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary",disabled:!t,children:p.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===a.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center text-gray-500 max-w-md",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Start a Conversation"}),(0,r.jsx)("p",{className:"text-sm",children:"Your messages are encrypted end-to-end. The enclave signs every response for verification."})]})}):a.map((e,t)=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[80%] p-4 rounded-lg ".concat("user"===e.role?"bg-primary/20 text-white":"bg-[#1a1a1a] border border-gray-800"),children:[(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)("p",{className:"whitespace-pre-wrap inline",children:e.content}),"assistant"===e.role&&e.signature&&(0,r.jsx)("button",{onClick:()=>g(f===t?null:t),className:"inline-flex align-middle ml-2 text-primary hover:opacity-80 transition-opacity",title:f===t?"Hide Details":"Show Details",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-4 w-4",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})})})]}),"assistant"===e.role&&f===t&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700 space-y-2 text-xs text-gray-400",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Platform:"}),(0,r.jsx)("span",{className:"text-white",children:e.platform})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"AI Model:"}),(0,r.jsx)("span",{className:"text-white",children:e.ai_model})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Timestamp:"}),(0,r.jsx)("span",{className:"text-white",children:S(e.timestamp)})]}),e.signature&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("span",{children:"Verified Signature:"}),e.verificationData&&(0,r.jsx)("button",{onClick:()=>C(e.verificationData),className:"text-primary hover:opacity-80 transition-opacity",title:"Full Chain Verification",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-4 w-4",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})})})]}),(0,r.jsx)("div",{className:"p-2 bg-[#0a0a0a] rounded font-mono text-primary break-all",children:e.signature})]})]})]})},t)),o&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("div",{className:"max-w-[80%] p-4 rounded-lg bg-[#1a1a1a] border border-gray-800",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-primary animate-bounce",style:{animationDelay:"0ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-primary animate-bounce",style:{animationDelay:"150ms"}}),(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-primary animate-bounce",style:{animationDelay:"300ms"}})]})})}),(0,r.jsx)("div",{ref:N})]}),m&&(0,r.jsx)("div",{className:"mx-4 mb-2 p-3 bg-red-900/50 border border-red-800 rounded-lg text-red-400 text-sm",children:m}),(0,r.jsx)("form",{onSubmit:A,className:"p-4 border-t border-gray-800",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:t?"Type your message...":"Connect and set API key first...",className:"flex-1 px-4 py-3 bg-[#0a0a0a] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",disabled:!t||o}),(0,r.jsx)("button",{type:"submit",disabled:!t||o||!i.trim(),className:"px-6 py-3 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 disabled:bg-primary/50 disabled:cursor-not-allowed transition-colors",children:"Send"})]})})]}),(0,r.jsx)(h,{isOpen:b,onClose:()=>j(!1),data:v})]})}function f(){let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),[i,l]=(0,s.useState)(null),o=e&&a;return(0,r.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a]",children:[(0,r.jsx)("header",{className:"border-b border-gray-800 px-6 py-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"N"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"Fully Secured Chat Bot"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Sparsity Nova Platform"})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:e&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(a?"bg-green-500":"bg-yellow-500")}),(0,r.jsx)("span",{className:"text-gray-400",children:a?"Ready":"API Key Required"})]})})]})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto p-6",children:o?(0,r.jsx)("div",{className:"h-[calc(100vh-10rem)] bg-[#111] rounded-lg border border-gray-800",children:(0,r.jsx)(y,{isReady:o})}):(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[(0,r.jsx)(d,{onConnected:e=>{t(!0),l(e)}}),(0,r.jsx)(x,{isConnected:e,onApiKeySet:()=>{n(!0)}})]})}),(0,r.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 border-t border-gray-800 bg-[#0a0a0a] px-6 py-3",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-sm text-gray-500",children:[(0,r.jsx)("span",{children:"End-to-end encrypted • Verifiable AI responses"}),i&&(0,r.jsxs)("span",{className:"font-mono text-xs text-gray-600",children:["Enclave: ",i.slice(0,10),"...",i.slice(-8)]})]})})]})}},6986:function(e,t,a){"use strict";function r(e){try{let t=atob(e),a="";for(let e=0;e<t.length;e++){let r=t.charCodeAt(e).toString(16).padStart(2,"0");a+=r}return a}catch(t){return e}}function s(e){let t=r(e);try{let a=atob(e),r=decodeURIComponent(a.split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),s=JSON.parse(r);if("object"==typeof s&&null!==s)return{isJson:!0,ethAddr:s.eth_addr||void 0,rawHex:t,jsonData:s}}catch(e){}return 40===t.length?{isJson:!1,ethAddr:"0x"+t,rawHex:t}:{isJson:!1,rawHex:t}}async function n(e){let t=await a.e(693).then(a.t.bind(a,4693,23)),r=atob(e),s=new Uint8Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);let n=t.decode(s);if(!Array.isArray(n)||n.length<4)throw Error("Invalid COSE_Sign1 structure");let i=n[2],l=t.decode(i),o=(e,t,a)=>{var r,s;return e instanceof Map?null!==(r=e.get(t))&&void 0!==r?r:e.get(a):null!==(s=e[t])&&void 0!==s?s:e[a]},c=o(l,"module_id",1),d=o(l,"timestamp",2),m=o(l,"digest",3),x=o(l,"pcrs",4),u=o(l,"certificate",5),h=o(l,"cabundle",6),p=o(l,"public_key",7),y=o(l,"user_data",8),f=o(l,"nonce",9),g={};if(x){if(x instanceof Map)for(let[e,t]of Array.from(x.entries()))t instanceof Uint8Array||t instanceof ArrayBuffer?g[String(e)]=Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join(""):g[String(e)]=String(t);else for(let[e,t]of Object.entries(x))t instanceof Uint8Array||t instanceof ArrayBuffer?g[String(e)]=Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join(""):g[String(e)]=String(t)}let b=e=>e?e instanceof Uint8Array||e instanceof ArrayBuffer?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))):String(e):"",j="";return y&&(y instanceof Uint8Array||y instanceof ArrayBuffer?j=new TextDecoder().decode(new Uint8Array(y)):j="string"==typeof y?y:JSON.stringify(y)),{module_id:c?String(c):"",digest:m instanceof Uint8Array||m instanceof ArrayBuffer?Array.from(new Uint8Array(m)).map(e=>e.toString(16).padStart(2,"0")).join(""):String(m||""),timestamp:"number"==typeof d?d:0,pcrs:g,certificate:b(u),cabundle:Array.isArray(h)?h.map(e=>b(e)):[],public_key:p?p instanceof Uint8Array||p instanceof ArrayBuffer?Array.from(new Uint8Array(p)).map(e=>e.toString(16).padStart(2,"0")).join(""):String(p):"",user_data:j,nonce:f?f instanceof Uint8Array||f instanceof ArrayBuffer?Array.from(new Uint8Array(f)).map(e=>e.toString(16).padStart(2,"0")).join(""):String(f):""}}async function i(e){let t="".concat(e.replace(/\/$/,""),"/.well-known/attestation"),a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!a.ok)throw Error("Failed to fetch attestation: ".concat(a.status));return a.json()}a.d(t,{Hd:function(){return i},XB:function(){return r},tG:function(){return s},u4:function(){return n}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6710)}),_N_E=e.O()}]);